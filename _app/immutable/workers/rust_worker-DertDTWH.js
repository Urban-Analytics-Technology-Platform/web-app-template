var rn=Object.defineProperty;var on=(n,e,t)=>e in n?rn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var sn=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var v=(n,e,t)=>on(n,typeof e!="symbol"?e+"":e,t);var Ln=sn((In,tn)=>{/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J=Symbol("Comlink.proxy"),cn=Symbol("Comlink.endpoint"),un=Symbol("Comlink.releaseProxy"),z=Symbol("Comlink.finalizer"),P=Symbol("Comlink.thrown"),Y=n=>typeof n=="object"&&n!==null||typeof n=="function",an={canHandle:n=>Y(n)&&n[J],serialize(n){const{port1:e,port2:t}=new MessageChannel;return q(n,e),[t,[t]]},deserialize(n){return n.start(),bn(n)}},fn={canHandle:n=>Y(n)&&P in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},X=new Map([["proxy",an],["throw",fn]]);function _n(n,e){for(const t of n)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function q(n,e=globalThis,t=["*"]){e.addEventListener("message",function r(o){if(!o||!o.data)return;if(!_n(t,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}const{id:_,type:s,path:a}=Object.assign({path:[]},o.data),g=(o.data.argumentList||[]).map(A);let l;try{const b=a.slice(0,-1).reduce((d,M)=>d[M],n),h=a.reduce((d,M)=>d[M],n);switch(s){case"GET":l=h;break;case"SET":b[a.slice(-1)[0]]=A(o.data.value),l=!0;break;case"APPLY":l=h.apply(b,g);break;case"CONSTRUCT":{const d=new h(...g);l=yn(d)}break;case"ENDPOINT":{const{port1:d,port2:M}=new MessageChannel;q(n,M),l=mn(d,[d])}break;case"RELEASE":l=void 0;break;default:return}}catch(b){l={value:b,[P]:0}}Promise.resolve(l).catch(b=>({value:b,[P]:0})).then(b=>{const[h,d]=W(b);e.postMessage(Object.assign(Object.assign({},h),{id:_}),d),s==="RELEASE"&&(e.removeEventListener("message",r),K(e),z in n&&typeof n[z]=="function"&&n[z]())}).catch(b=>{const[h,d]=W({value:new TypeError("Unserializable return value"),[P]:0});e.postMessage(Object.assign(Object.assign({},h),{id:_}),d)})}),e.start&&e.start()}function gn(n){return n.constructor.name==="MessagePort"}function K(n){gn(n)&&n.close()}function bn(n,e){return D(n,[],e)}function I(n){if(n)throw new Error("Proxy has been released and is not useable")}function Q(n){return k(n,{type:"RELEASE"}).then(()=>{K(n)})}const B=new WeakMap,U="FinalizationRegistry"in globalThis&&new FinalizationRegistry(n=>{const e=(B.get(n)||0)-1;B.set(n,e),e===0&&Q(n)});function ln(n,e){const t=(B.get(e)||0)+1;B.set(e,t),U&&U.register(n,e,n)}function wn(n){U&&U.unregister(n)}function D(n,e=[],t=function(){}){let r=!1;const o=new Proxy(t,{get(_,s){if(I(r),s===un)return()=>{wn(o),Q(n),r=!0};if(s==="then"){if(e.length===0)return{then:()=>o};const a=k(n,{type:"GET",path:e.map(g=>g.toString())}).then(A);return a.then.bind(a)}return D(n,[...e,s])},set(_,s,a){I(r);const[g,l]=W(a);return k(n,{type:"SET",path:[...e,s].map(b=>b.toString()),value:g},l).then(A)},apply(_,s,a){I(r);const g=e[e.length-1];if(g===cn)return k(n,{type:"ENDPOINT"}).then(A);if(g==="bind")return D(n,e.slice(0,-1));const[l,b]=G(a);return k(n,{type:"APPLY",path:e.map(h=>h.toString()),argumentList:l},b).then(A)},construct(_,s){I(r);const[a,g]=G(s);return k(n,{type:"CONSTRUCT",path:e.map(l=>l.toString()),argumentList:a},g).then(A)}});return ln(o,n),o}function dn(n){return Array.prototype.concat.apply([],n)}function G(n){const e=n.map(W);return[e.map(t=>t[0]),dn(e.map(t=>t[1]))]}const Z=new WeakMap;function mn(n,e){return Z.set(n,e),n}function yn(n){return Object.assign(n,{[J]:!0})}function W(n){for(const[e,t]of X)if(t.canHandle(n)){const[r,o]=t.serialize(n);return[{type:"HANDLER",name:e,value:r},o]}return[{type:"RAW",value:n},Z.get(n)||[]]}function A(n){switch(n.type){case"HANDLER":return X.get(n.name).deserialize(n.value);case"RAW":return n.value}}function k(n,e,t){return new Promise(r=>{const o=hn();n.addEventListener("message",function _(s){!s.data||!s.data.id||s.data.id!==o||(n.removeEventListener("message",_),r(s.data))}),n.start&&n.start(),n.postMessage(Object.assign({id:o},e),t)})}function hn(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}let f;const nn=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&nn.decode();let R=null;function F(){return(R===null||R.byteLength===0)&&(R=new Uint8Array(f.memory.buffer)),R}function S(n,e){return n=n>>>0,nn.decode(F().subarray(n,n+e))}const p=new Array(128).fill(void 0);p.push(void 0,null,!0,!1);let x=p.length;function u(n){x===p.length&&p.push(p.length+1);const e=x;if(x=p[e],typeof x!="number")throw new Error("corrupt heap");return p[e]=n,e}function i(n){return p[n]}function w(n){if(typeof n!="boolean")throw new Error(`expected a boolean argument, found ${typeof n}`)}function pn(n){n<132||(p[n]=x,x=n)}function V(n){const e=i(n);return pn(n),e}function T(n){if(typeof n!="number")throw new Error(`expected a number argument, found ${typeof n}`)}function E(n){return n==null}let O=null;function En(){return(O===null||O.byteLength===0)&&(O=new Float64Array(f.memory.buffer)),O}let C=null;function m(){return(C===null||C.byteLength===0)&&(C=new Int32Array(f.memory.buffer)),C}let j=0;const N=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},An=typeof N.encodeInto=="function"?function(n,e){return N.encodeInto(n,e)}:function(n,e){const t=N.encode(n);return e.set(t),{read:n.length,written:t.length}};function $(n,e,t){if(typeof n!="string")throw new Error(`expected a string argument, found ${typeof n}`);if(t===void 0){const a=N.encode(n),g=e(a.length,1)>>>0;return F().subarray(g,g+a.length).set(a),j=a.length,g}let r=n.length,o=e(r,1)>>>0;const _=F();let s=0;for(;s<r;s++){const a=n.charCodeAt(s);if(a>127)break;_[o+s]=a}if(s!==r){s!==0&&(n=n.slice(s)),o=t(o,r,r=s+n.length*3,1)>>>0;const a=F().subarray(o+s,o+r),g=An(n,a);if(g.read!==n.length)throw new Error("failed to pass whole string");s+=g.written,o=t(o,r,s,1)>>>0}return j=s,o}function kn(n){if(typeof n!="bigint")throw new Error(`expected a bigint argument, found ${typeof n}`)}let L=null;function Sn(){return(L===null||L.byteLength===0)&&(L=new BigInt64Array(f.memory.buffer)),L}function H(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const o=n.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=n.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(n)){const o=n.length;let _="[";o>0&&(_+=H(n[0]));for(let s=1;s<o;s++)_+=", "+H(n[s]);return _+="]",_}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}function c(n,e){try{return n.apply(this,e)}catch(t){let r=function(){try{return t instanceof Error?`${t.message}

Stack:
${t.stack}`:t.toString()}catch{return"<failed to stringify thrown value>"}}();throw console.error("wasm-bindgen: imported JS function that was not marked as `catch` threw an error:",r),t}}function y(n,e){try{return n.apply(this,e)}catch(t){f.__wbindgen_exn_store(u(t))}}const xn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>f.__wbg_backend_free(n>>>0));class Mn{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,xn.unregister(this),e}free(){const e=this.__destroy_into_raw();f.__wbg_backend_free(e)}constructor(){const e=f.backend_new();return this.__wbg_ptr=e>>>0,this}addColours(e){let t,r;try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const b=f.__wbindgen_add_to_stack_pointer(-16);T(this.__wbg_ptr),f.backend_addColours(b,this.__wbg_ptr,u(e));var o=m()[b/4+0],_=m()[b/4+1],s=m()[b/4+2],a=m()[b/4+3],g=o,l=_;if(a)throw g=0,l=0,V(s);return t=g,r=l,S(g,l)}finally{f.__wbindgen_add_to_stack_pointer(16),f.__wbindgen_free(t,r,1)}}}async function Rn(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function Tn(){const n={};return n.wbg={},n.wbg.__wbindgen_error_new=function(e,t){const r=new Error(S(e,t));return u(r)},n.wbg.__wbindgen_string_new=function(e,t){const r=S(e,t);return u(r)},n.wbg.__wbindgen_bigint_from_i64=function(e){return u(e)},n.wbg.__wbindgen_jsval_eq=function(e,t){const r=i(e)===i(t);return w(r),r},n.wbg.__wbindgen_bigint_from_u64=function(e){const t=BigInt.asUintN(64,e);return u(t)},n.wbg.__wbindgen_object_drop_ref=function(e){V(e)},n.wbg.__wbindgen_boolean_get=function(e){const t=i(e),r=typeof t=="boolean"?t?1:0:2;return T(r),r},n.wbg.__wbindgen_is_bigint=function(e){const t=typeof i(e)=="bigint";return w(t),t},n.wbg.__wbindgen_number_get=function(e,t){const r=i(t),o=typeof r=="number"?r:void 0;E(o)||T(o),En()[e/8+1]=E(o)?0:o,m()[e/4+0]=!E(o)},n.wbg.__wbindgen_string_get=function(e,t){const r=i(t),o=typeof r=="string"?r:void 0;var _=E(o)?0:$(o,f.__wbindgen_malloc,f.__wbindgen_realloc),s=j;m()[e/4+1]=s,m()[e/4+0]=_},n.wbg.__wbindgen_is_object=function(e){const t=i(e),r=typeof t=="object"&&t!==null;return w(r),r},n.wbg.__wbindgen_in=function(e,t){const r=i(e)in i(t);return w(r),r},n.wbg.__wbindgen_jsval_loose_eq=function(e,t){const r=i(e)==i(t);return w(r),r},n.wbg.__wbindgen_object_clone_ref=function(e){const t=i(e);return u(t)},n.wbg.__wbg_debug_5fb96680aecf5dc8=function(){return c(function(e){console.debug(i(e))},arguments)},n.wbg.__wbg_error_8e3928cfb8a43e2b=function(){return c(function(e){console.error(i(e))},arguments)},n.wbg.__wbg_info_530a29cb2e4e3304=function(){return c(function(e){console.info(i(e))},arguments)},n.wbg.__wbg_log_5bb5f88f245d7762=function(){return c(function(e){console.log(i(e))},arguments)},n.wbg.__wbg_warn_63bbae1730aead09=function(){return c(function(e){console.warn(i(e))},arguments)},n.wbg.__wbg_new_abda76e883ba8a5f=function(){return c(function(){const e=new Error;return u(e)},arguments)},n.wbg.__wbg_stack_658279fe44541cf6=function(){return c(function(e,t){const r=i(t).stack,o=$(r,f.__wbindgen_malloc,f.__wbindgen_realloc),_=j;m()[e/4+1]=_,m()[e/4+0]=o},arguments)},n.wbg.__wbg_error_f851667af71bcfc6=function(){return c(function(e,t){let r,o;try{r=e,o=t,console.error(S(e,t))}finally{f.__wbindgen_free(r,o,1)}},arguments)},n.wbg.__wbg_crypto_1d1f22824a6a080c=function(){return c(function(e){const t=i(e).crypto;return u(t)},arguments)},n.wbg.__wbg_process_4a72847cc503995b=function(){return c(function(e){const t=i(e).process;return u(t)},arguments)},n.wbg.__wbg_versions_f686565e586dd935=function(){return c(function(e){const t=i(e).versions;return u(t)},arguments)},n.wbg.__wbg_node_104a2ff8d6ea03a2=function(){return c(function(e){const t=i(e).node;return u(t)},arguments)},n.wbg.__wbindgen_is_string=function(e){const t=typeof i(e)=="string";return w(t),t},n.wbg.__wbg_require_cca90b1a94a0255b=function(){return y(function(){const e=tn.require;return u(e)},arguments)},n.wbg.__wbindgen_is_function=function(e){const t=typeof i(e)=="function";return w(t),t},n.wbg.__wbg_msCrypto_eb05e62b530a1508=function(){return c(function(e){const t=i(e).msCrypto;return u(t)},arguments)},n.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return y(function(e,t){i(e).randomFillSync(V(t))},arguments)},n.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return y(function(e,t){i(e).getRandomValues(i(t))},arguments)},n.wbg.__wbg_now_abd80e969af37148=function(){return c(function(e){return i(e).now()},arguments)},n.wbg.__wbg_performance_a1b8bde2ee512264=function(){return c(function(e){const t=i(e).performance;return u(t)},arguments)},n.wbg.__wbindgen_is_undefined=function(e){const t=i(e)===void 0;return w(t),t},n.wbg.__wbg_get_bd8e338fbd5f5cc8=function(){return c(function(e,t){const r=i(e)[t>>>0];return u(r)},arguments)},n.wbg.__wbg_length_cd7af8117672b8b8=function(){return c(function(e){const t=i(e).length;return T(t),t},arguments)},n.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(){return c(function(e,t){const r=new Function(S(e,t));return u(r)},arguments)},n.wbg.__wbg_next_40fc327bfc8770e6=function(){return c(function(e){const t=i(e).next;return u(t)},arguments)},n.wbg.__wbg_next_196c84450b364254=function(){return y(function(e){const t=i(e).next();return u(t)},arguments)},n.wbg.__wbg_done_298b57d23c0fc80c=function(){return c(function(e){const t=i(e).done;return w(t),t},arguments)},n.wbg.__wbg_value_d93c65011f51a456=function(){return c(function(e){const t=i(e).value;return u(t)},arguments)},n.wbg.__wbg_iterator_2cee6dadfd956dfa=function(){return c(function(){return u(Symbol.iterator)},arguments)},n.wbg.__wbg_get_e3c254076557e348=function(){return y(function(e,t){const r=Reflect.get(i(e),i(t));return u(r)},arguments)},n.wbg.__wbg_call_27c0f87801dedf93=function(){return y(function(e,t){const r=i(e).call(i(t));return u(r)},arguments)},n.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return y(function(){const e=self.self;return u(e)},arguments)},n.wbg.__wbg_window_c6fb939a7f436783=function(){return y(function(){const e=window.window;return u(e)},arguments)},n.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return y(function(){const e=globalThis.globalThis;return u(e)},arguments)},n.wbg.__wbg_global_207b558942527489=function(){return y(function(){const e=global.global;return u(e)},arguments)},n.wbg.__wbg_isArray_2ab64d95e09ea0ae=function(){return c(function(e){const t=Array.isArray(i(e));return w(t),t},arguments)},n.wbg.__wbg_instanceof_ArrayBuffer_836825be07d4c9d2=function(){return c(function(e){let t;try{t=i(e)instanceof ArrayBuffer}catch{t=!1}const r=t;return w(r),r},arguments)},n.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return y(function(e,t,r){const o=i(e).call(i(t),i(r));return u(o)},arguments)},n.wbg.__wbg_instanceof_Map_87917e0a7aaf4012=function(){return c(function(e){let t;try{t=i(e)instanceof Map}catch{t=!1}const r=t;return w(r),r},arguments)},n.wbg.__wbg_isSafeInteger_f7b04ef02296c4d2=function(){return c(function(e){const t=Number.isSafeInteger(i(e));return w(t),t},arguments)},n.wbg.__wbg_entries_95cc2c823b285a09=function(){return c(function(e){const t=Object.entries(i(e));return u(t)},arguments)},n.wbg.__wbg_buffer_12d079cc21e14bdb=function(){return c(function(e){const t=i(e).buffer;return u(t)},arguments)},n.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(){return c(function(e,t,r){const o=new Uint8Array(i(e),t>>>0,r>>>0);return u(o)},arguments)},n.wbg.__wbg_new_63b92bc8671ed464=function(){return c(function(e){const t=new Uint8Array(i(e));return u(t)},arguments)},n.wbg.__wbg_set_a47bac70306a19a7=function(){return c(function(e,t,r){i(e).set(i(t),r>>>0)},arguments)},n.wbg.__wbg_length_c20a40f15020d68a=function(){return c(function(e){const t=i(e).length;return T(t),t},arguments)},n.wbg.__wbg_instanceof_Uint8Array_2b3bbecd033d19f6=function(){return c(function(e){let t;try{t=i(e)instanceof Uint8Array}catch{t=!1}const r=t;return w(r),r},arguments)},n.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(){return c(function(e){const t=new Uint8Array(e>>>0);return u(t)},arguments)},n.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(){return c(function(e,t,r){const o=i(e).subarray(t>>>0,r>>>0);return u(o)},arguments)},n.wbg.__wbindgen_bigint_get_as_i64=function(e,t){const r=i(t),o=typeof r=="bigint"?r:void 0;E(o)||kn(o),Sn()[e/8+1]=E(o)?BigInt(0):o,m()[e/4+0]=!E(o)},n.wbg.__wbindgen_debug_string=function(e,t){const r=H(i(t)),o=$(r,f.__wbindgen_malloc,f.__wbindgen_realloc),_=j;m()[e/4+1]=_,m()[e/4+0]=o},n.wbg.__wbindgen_throw=function(e,t){throw new Error(S(e,t))},n.wbg.__wbindgen_memory=function(){const e=f.memory;return u(e)},n}function On(n,e){return f=n.exports,en.__wbindgen_wasm_module=e,L=null,O=null,C=null,R=null,f}async function en(n){if(f!==void 0)return f;typeof n>"u"&&(n="assets/rust_backend_bg.wasm");const e=Tn();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:r}=await Rn(await n,e);return On(t,r)}class Cn{constructor(){v(this,"inner");this.inner=null}async initialise(){await en(),this.inner=new Mn}unset(){this.inner=null}isLoaded(){return this.inner!=null}async addColours(e){if(!this.inner)throw new Error("RustBackend not initialised");const t=JSON.parse(this.inner.addColours(e));return console.log("RustBackend.addColours result",t),t}}q(Cn)});export default Ln();
