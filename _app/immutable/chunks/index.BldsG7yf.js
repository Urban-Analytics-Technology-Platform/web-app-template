import{n as b,j as a}from"./runtime.BRhglTBZ.js";function d(s,n,t){if(s==null)return n(void 0),b;const r=s.subscribe(n,t);return r.unsubscribe?()=>r.unsubscribe():r}const i=[];function _(s,n){return{subscribe:p(s,n).subscribe}}function p(s,n=b){let t=null;const r=new Set;function c(u){if(a(s,u)&&(s=u,t)){const o=!i.length;for(const e of r)e[1](),i.push(e,s);if(o){for(let e=0;e<i.length;e+=2)i[e][0](i[e+1]);i.length=0}}}function f(u){c(u(s))}function l(u,o=b){const e=[u,o];return r.add(e),r.size===1&&(t=n(c,f)||b),u(s),()=>{r.delete(e),r.size===0&&t&&(t(),t=null)}}return{set:c,update:f,subscribe:l}}function h(s){let n;return d(s,t=>n=t)(),n}export{h as g,_ as r,d as s,p as w};
